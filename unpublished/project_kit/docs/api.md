# Описание API - черновик

##### Общая инфораци о генерации API

Для генерации API на основе спецификации используется специально разработанная под нужды компании версия пакета [swagger_parser](https://pub.dev/packages/swagger_parser).

Такой подход позволяет сильно сократить время на интеграцию API, уменьшить количество ошибок, упростить поддержку и улучшить документирование. 

Но для этого необходимо иметь хорошо описанную спецификацию, т.к. весь код на клиенте будут в точности ей соответствовать.


##### Версионирование спецификации

```json
"info": {
    "title": "Microservice Auth API methods",
    "version": "0.2.5"
}
```
Желательно версионировать спецификацию API, чтобы можно было отслеживать изменения в ней.

Формат версии - стандартный `major.minor.patch`.

`patch` - исправление ошибок, добавление незначительных фич.
`minor` - добавление новых фич, которые не ломают совместимость с предыдущими версиями.
`major` - изменения, которые ломают совместимость с предыдущими версиями.
    
##### Описание запросов

Для документирования принципы точно такие же, как и для кода - старайтесь предоставить описание, применение, особенности, связи, предостеречь коллег о возможных проблемах и т.д. Если есть валидация, то нужны её условия и используемые регулярки, если есть. Всё это поможет разработчикам на клиенте быстрее разобраться в спецификации и уменьшит количество ошибок при интеграции.

Для запросов желательно имеметь описание (`summary`, `description`), чтобы было понятно, что делает запрос.

Для параметров запроса тоже желательно иметь описание (`description`). Например, что делает параметр, особенности применения и т.д.

**(!)** Важно указывать читаемый `operationId` для каждого запроса, чтобы было понятно, что делает запрос. Он будет использоваться для имён методов.
Примеры хороших `operationId`:
- `get_user`
- `get_daily_statistic`
- `create_user`
- `send_code_to_email`
- `update_fcm_token`

#### Описание моделей

Для моделей желательно иметь описание (`description`). Например, что это за модель, где используется, с чем связана, особенности применения и т.д.

Для полей модели, если это необходимо, желательно иметь описание (`description`). Например, где используется, параметры валидации, особенности, связь с другими моделями, откуда берётся (важно, если, например, в модели несколько разных id из разных моеделей).

#### Возврат ошибок

Все ошибки, кроме валидации, нужно возвращать в одной модели, чтобы их можно было обработать на клиенте.
Для каждой ошибки, которая могла возникнуть при действиях пользователя, желательно передавать сообщение, которое будет отображаться пользователю.

#### Enums

Для перечислений желательно иметь описание (`description`) с описанием каждого значения. Особенно важно, если значения числовые или мало понятные.

Для энамов нет необходимости в отдельных запросах для получения всех значений, т.к. они сразу генерируются по спецификации.



